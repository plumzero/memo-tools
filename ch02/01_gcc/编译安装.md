
### gmp-6.1.0

正常情况下，是应该像下面这样进行的:
```s
  # 配置/编译
  cd ~/8.4.0/source/gmp-6.1.0
  ./configure --prefix=$HOME/8.4.0/depend/gmp CC="gcc -std=c11"
  make -j4
  # 优化(可跳过)
  cd tune
  make speed
  cd ..
  # 安装
  make install
```

### mpfr-3.1.4

依赖: gmp

解压
```s
  cd ~/8.4.0/source/mpfr-3.1.4
``` 

下载补丁并更新(可以先不用执行本步骤，如果在后续编译过程报错，可以返回执行该步骤)
```s
  wget http://www.mpfr.org/mpfr-3.1.4/allpatches
  patch -N -Z -p1 < allpatches
```

继续
```s
  # 配置/编译
  ./configure --prefix ~/8.4.0/depend/mpfr --with-gmp=$HOME/8.4.0/depend/gmp --enable-thread-safe CC="gcc -std=c11"
  make -j4
  # 优化/检验(如果该步骤的优化或检验失败，可直接执行安装)
  cd tune
  make -i speed
  cd ..
  make check
  # 安装
  make install
```

### mpc-1.0.3

依赖包: gmp mpfr

```s
  # 配置/编译
  cd ~/8.4.0/source/mpc-1.0.3
  ./configure --prefix=$HOME/8.4.0/depend/mpc --with-gmp=$HOME/8.4.0/depend/gmp --with-mpfr=$HOME/8.4.0/depend/mpfr CC="gcc -std=c11"
  make -j4
  # 检验(如果该步骤的检验失败，可直接执行安装)
  make check
  # 安装
  make install
```

### isl-0.18

依赖包: gmp

```s
  # 配置/编译
  cd ~/8.4.0/source/isl-0.18
  ./configure --prefix=$HOME/8.4.0/depend/isl --with-gmp-prefix=$HOME/8.4.0/depend/gmp CC="gcc -std=c11"
  make -j4
  # 检验(如果该步骤的检验失败，可直接执行安装)
  make check
  # 安装
  make install
```

### gcc-8.4.0

配置
```s
  cd ~/8.4.0/build
  ../source/configure --prefix=$HOME/8.4.0/install --with-mpc=$HOME/8.4.0/depend/mpc --with-mpfr=$HOME/8.4.0/depend/mpfr --with-isl=$HOME/8.4.0/depend/isl --with-gmp=$HOME/8.4.0/depend/gmp --disable-multilib --enable-checking=release --enable-languages=c,c++ --disable-bootstrap --with-system-zlib
  export LD_LIBRARY_PATH=$HOME/8.4.0/depend/mpc/lib:$HOME/8.4.0/depend/mpfr/lib:$HOME/8.4.0/depend/mpc/lib:$HOME/8.4.0/depend/isl/lib
```
这里使用的 zlib 是系统环境上的，而不是 gcc 目录下自带的包，这也是推荐的做法。

编译
```s
  make -j4
```
在编译时，如果报一些找不到原因的错误，可以尝试将 ~/8.4.0/source 目录下的 gmp-6.1.0、mpfr-3.1.4、mpc-1.0.3、isl-0.18 文件都删除，再试一下。其他错误可以从 config.log 中查看原因分析。

在安装之前，可以对其进行测试(但可以不必强制):
```s
  ulimit -s 32768
  make -k test
```

安装:
```s
  make install
```

使用:
```s
  export PATH=$HOME/8.4.0/install/bin:$PATH
```
即可使该版本的 gcc 优先于系统自带的 gcc 被调用。
